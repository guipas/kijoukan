<kjk-menu></kjk-menu>


<div class="home-kjk">
<div class="names">
  <div ng-repeat="player in kjk.players" class="name">{{ player.$value }}</div>
</div>
  <table class="shows-tab">
    <tr>
      <td class="td-show">

      </td>
      <td ng-repeat="show in kjk.shows" class="td-show">
        <span class="show-name">{{ show.name }}</span>
      </td>
      <td class="td-show"></td>
      <td class="td-show">Total <br/>disponible</td>
      <td class="td-show">Total <br/>pas disponible</td>
      <td class="td-show">Total <br/>jou√©</td>
    </tr>
    <tr>
      <td class="td-show">

      </td>
      <td ng-repeat="show in kjk.shows" class="td-show">
        <span class="date day">{{ kjk.displayDay(show) }}</span>
        <span class="date month">{{ kjk.displayMonth(show) }}</span>
        <span class="date year">{{ kjk.displayYear(show) }}</span>
      </td>

      <td></td>
      <td></td>
      <td></td>
      <td></td>

    </tr>
    <tr ng-repeat="player in kjk.players" class="player">

      <td class="name">
        <span>{{ player.$value }}</span>

      </td>
      <td ng-repeat="show in kjk.shows" class="presence" ng-class="{yes: (show.players[player.$id]===true),no: (show.players[player.$id]===false)}">
      <div class="presence-inner">
      	<div>
          <!-- <input class="available" type="checkbox" ng-model="show.players[player.$id]" ng-change="kjk.updatePlayerOnShow(player,show);" tooltip="{{ 'HOME_AVAILABLE_TOOLTIP' | translate }}"/> -->
          <select ng-show="!kjk.datePassed(show)" class="available" ng-model="show.players[player.$id]" ng-change="kjk.updatePlayerOnShow(player,show);" tooltip="{{ 'HOME_AVAILABLE_TOOLTIP' | translate }}" convert-to-boolean-or-null>
            <option value="{{ kjk.availabilities.yes }}" ng-selected="show.players[player.$id]===kjk.availabilities.yes">{{ 'KJK_AVAILABLE_YES' | translate }}</option>
            <option value="{{ kjk.availabilities.no }}" ng-selected="show.players[player.$id]===kjk.availabilities.no">{{ 'KJK_AVAILABLE_NO' | translate }}</option>
            <option value="{{ kjk.availabilities.maybe }}" ng-selected="show.players[player.$id]!==kjk.availabilities.yes && show.players[player.$id]!==kjk.availabilities.no">{{ 'KJK_AVAILABLE_MAYBE' | translate }}</option>
          </select>

          <span ng-show="show.players[player.$id] && !kjk.datePassed(show)" class="star glyphicon" ng-class="{'glyphicon-star' : (show.stars[player.$id] && show.players[player.$id]), 'glyphicon-star-empty' : (!show.stars[player.$id])}" ng-click="kjk.starPlayerOnShow(player,show);" tooltip="{{ 'HOME_STAR_TOOLTIP' | translate }}"></span>
          <span class="role-text">{{ show.roles[player.$id] }}</span>
          <button class="btn btn-default role" ng-show='show.players[player.$id] && !kjk.datePassed(show)' popover-title="{{'ENTER_ROLE' | translate }}" popover-placement="right" popover-template="'html/kijoukan.role_edit_button.html'" popover-elem ><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
         </div>
      </div>
      </td>
      <td class="name">
        <span>{{ player.$value }}</span>

      </td>
      <td class="total">
        <span>
          {{ kjk.getCounter(player).yes }}
        </span>
      </td>
      <td class="total">
          <span>
            {{ kjk.getCounter(player).no }}
          </span>
      </td>
      <td class="total">
          <span>
            {{ kjk.getCounter(player).played }}
          </span>
      </td>

    </tr>

  </table>

</div>
